{% import 'macros.html' as macros %}{% if success %}<div class="OmnisysMethodSuccess">{{success}}</div>{% endif %}{% if failure %}<div class="OmnisysMethodFailure">{{failure}}</div>{% endif %}
<table>
{% if currentItem.CreatorID > 0 %}
{{macros.tableRow('Created By', module.getColumnValue(currentItem, 'CreatorID') ~ ' on ' ~ currentItem.CreateTime)}}
{% endif %}
{{macros.tableRow('Status', module.getColumnValue(currentItem, 'Status'))}}
{{macros.tableRow('Priority', module.getColumnValue(currentItem, 'Priority'))}}
{{macros.tableRow('Owner', module.getColumnValue(currentItem, 'OwnerID'))}}
{{module.getFormField('Watchers', '', [], true)}}
{{macros.tableRow('Subject', module.getColumnValue(currentItem, 'Subject'))}}
{{macros.tableRow('Category', module.getColumnValue(currentItem, 'CategoryID'))}}
{{macros.tableRow('Type', module.getColumnValue(currentItem, 'Type'))}}
{% if currentItem.TimeSpent > 0 %}
{{macros.tableRow('Time Spent', module.getColumnValue(currentItem, 'TimeSpent'))}}
{% endif %}
{{macros.tableRow('Last Update', module.getColumnValue(currentItem, 'LastUpdate'))}}
{% if currentItem.DueDate %}
{{macros.tableRow('Due Date', module.getColumnValue(currentItem, 'DueDate'))}}
{% endif %}
{% if currentItem.CompletionTime %}
{{macros.tableRow('Completion Time', module.getColumnValue(currentItem, 'CompletionTime'))}}
{% endif %}
{% if currentItem.TotalTime %}
{{macros.tableRow('Total Time Worked', currentItem.TotalTime ~ ' minutes')}}
{% endif %}
{% if currentItem.Type == 'software' %}
{{macros.tableRow('Software', module.getColumnValue(currentItem, 'SoftwareID'))}}
{{macros.tableRow('Software Element', module.getColumnValue(currentItem, 'ElementID'))}}
{{macros.tableRow('Software Version', module.getColumnValue(currentItem, 'ReleaseID'))}}
{{macros.tableRow('Severity', module.getColumnValue(currentItem, 'Severity'))}}
{{macros.tableRow('Projection', module.getColumnValue(currentItem, 'Projection'))}}
{{macros.tableRow('Devopment Status', module.getColumnValue(currentItem, 'DevStatus'))}}
{{macros.tableRow('Quality Status', module.getColumnValue(currentItem, 'QualityStatus'))}}
{{macros.tableRow('Description', module.getColumnValue(currentItem, 'Description'))}}
{{macros.tableRow('Steps To Reproduce', module.getColumnValue(currentItem, 'StepsToReproduce'))}}
{% endif %}
</table>

<table>
{% for content in currentItem.ContentList %}
<tr class="OmnisysTicketContent">
  <th class="OmnisysTicketContent">
  {% if content.UserID > 0 %}{% set contentUser = currentItem.getByID('user', content.UserID) %}
    <a href="?Admin=Display&Module=User&Display=View&UserID={{content.UserID}}">{{contentUser.Name}}</a>
  {% else %}
    Auto Created
  {% endif %} [{{content.UpdateType | title}}]
    <br />
    {{content.UpdateTime}}
    {% if content.TimeWorked %}<br />{{content.TimeWorked}} minutes{% endif %}
  </th>
  <td class="OmnisysTicketContent Omnisys{{content.UpdateType | title}}Content">
    {{content.UpdateText}}
    {% if content.History %}<div class="OmnisysTicketHistory">{% for history in content.History %}{% if history.Note %}<div class="OmnisysTicketHistoryNote">{{history.Note}}</div>{% endif %}{% endfor %}</div>{% endif %}
  </td>
</tr>
{% endfor %}
</table>