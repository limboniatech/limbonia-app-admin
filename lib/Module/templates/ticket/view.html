{% import 'macros.html' as macros %}{% if success %}<div class="methodSuccess">{{success}}</div>{% endif %}{% if failure %}<div class="methodFailure">{{failure}}</div>{% endif %}
{% if currentItem.CreatorID > 0 %}
{{macros.dataField('Created By', module.getColumnValue(currentItem, 'CreatorID') ~ ' on ' ~ currentItem.CreateTime)}}
{% endif %}
{{macros.dataField('Status', module.getColumnValue(currentItem, 'Status'))}}
{{macros.dataField('Priority', module.getColumnValue(currentItem, 'Priority'))}}
{{macros.dataField('Owner', module.getColumnValue(currentItem, 'OwnerID'))}}
{{module.getFormField('Watchers', '', [], false)}}
{{macros.dataField('Subject', module.getColumnValue(currentItem, 'Subject'))}}
{{macros.dataField('Category', module.getColumnValue(currentItem, 'CategoryID'))}}
{{macros.dataField('Type', module.getColumnValue(currentItem, 'Type'))}}
{% if currentItem.TimeSpent > 0 %}
{{macros.dataField('Time Spent', module.getColumnValue(currentItem, 'TimeSpent'))}}
{% endif %}
{{macros.dataField('Last Update', module.getColumnValue(currentItem, 'LastUpdate'))}}
{% if currentItem.DueDate %}
{{macros.dataField('Due Date', module.getColumnValue(currentItem, 'DueDate'))}}
{% endif %}
{% if currentItem.CompletionTime %}
{{macros.dataField('Completion Time', module.getColumnValue(currentItem, 'CompletionTime'))}}
{% endif %}
{% if currentItem.TotalTime %}
{{macros.dataField('Total Time Worked', currentItem.TotalTime ~ ' minutes')}}
{% endif %}
{% if currentItem.Type == 'software' %}
{{macros.dataField('Software', module.getColumnValue(currentItem, 'SoftwareID'))}}
{{macros.dataField('Software Element', module.getColumnValue(currentItem, 'ElementID'))}}
{{macros.dataField('Software Version', module.getColumnValue(currentItem, 'ReleaseID'))}}
{{macros.dataField('Severity', module.getColumnValue(currentItem, 'Severity'))}}
{{macros.dataField('Projection', module.getColumnValue(currentItem, 'Projection'))}}
{{macros.dataField('Devopment Status', module.getColumnValue(currentItem, 'DevStatus'))}}
{{macros.dataField('Quality Status', module.getColumnValue(currentItem, 'QualityStatus'))}}
{{macros.dataField('Description', module.getColumnValue(currentItem, 'Description'))}}
{{macros.dataField('Steps To Reproduce', module.getColumnValue(currentItem, 'StepsToReproduce'))}}
{% endif %}

{% for content in currentItem.contentList %}
<div class="field ticketContent">
  <span class="label">
  {% if content.userID > 0 %}
    <a href="{{controller.generateUri('user', currentItem.id, content.userID)}}">{{content.user.name}}</a>
  {% else %}
    Auto Created
  {% endif %} [{{content.updateType | title}}]
    <br>
    {{content.updateTime}}
    {% if content.timeWorked %}<br>{{content.timeWorked}} minutes{% endif %}
  </span>
  <span class="{{content.updateType}} data">
    {{content.updateText}}
    {% if content.history %}<div class="history">{% for history in content.history %}{% if history.note %}<div class="note">{{history.note}}</div>{% endif %}{% endfor %}</div>{% endif %}
  </span>
</div>
{% endfor %}